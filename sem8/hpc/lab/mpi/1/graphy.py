import matplotlib.pyplot as plt
import pandas as pd
from io import StringIO

strdata = """
0 1 0.0001480579376
1 1 5.006790161e-06
2 1 3.099441528e-06
3 1 3.099441528e-06
4 1 3.814697266e-06
5 1 3.099441528e-06
6 1 3.099441528e-06
7 1 3.814697266e-06
8 1 3.099441528e-06
9 1 3.099441528e-06
10 1 4.053115845e-06
11 1 2.861022949e-06
12 1 3.099441528e-06
13 1 3.099441528e-06
14 1 2.861022949e-06
15 1 3.099441528e-06
16 1 3.099441528e-06
17 1 3.814697266e-06
18 1 3.099441528e-06
19 1 4.053115845e-06
20 1 2.861022949e-06
21 1 2.861022949e-06
22 1 3.099441528e-06
23 1 2.861022949e-06
24 1 2.861022949e-06
25 1 3.099441528e-06
26 1 3.099441528e-06
27 1 2.861022949e-06
28 1 3.099441528e-06
29 1 3.099441528e-06
0 10 2.861022949e-06
1 10 2.861022949e-06
2 10 3.099441528e-06
3 10 2.861022949e-06
4 10 3.099441528e-06
5 10 3.099441528e-06
6 10 2.861022949e-06
7 10 2.861022949e-06
8 10 3.099441528e-06
9 10 3.099441528e-06
10 10 2.861022949e-06
11 10 3.099441528e-06
12 10 3.099441528e-06
13 10 2.861022949e-06
14 10 3.099441528e-06
15 10 3.099441528e-06
16 10 2.861022949e-06
17 10 3.099441528e-06
18 10 4.053115845e-06
19 10 2.861022949e-06
20 10 4.053115845e-06
21 10 3.099441528e-06
22 10 3.099441528e-06
23 10 2.861022949e-06
24 10 3.099441528e-06
25 10 2.861022949e-06
26 10 2.861022949e-06
27 10 3.099441528e-06
28 10 3.099441528e-06
29 10 3.814697266e-06
0 100 0.0007519721985
1 100 5.006790161e-06
2 100 3.099441528e-06
3 100 4.053115845e-06
4 100 3.814697266e-06
5 100 6.914138794e-06
6 100 4.053115845e-06
7 100 3.814697266e-06
8 100 2.861022949e-06
9 100 4.053115845e-06
10 100 4.053115845e-06
11 100 4.053115845e-06
12 100 4.053115845e-06
13 100 4.053115845e-06
14 100 3.814697266e-06
15 100 4.053115845e-06
16 100 4.053115845e-06
17 100 9.059906006e-06
18 100 4.053115845e-06
19 100 4.053115845e-06
20 100 4.053115845e-06
21 100 3.814697266e-06
22 100 5.006790161e-06
23 100 4.053115845e-06
24 100 4.053115845e-06
25 100 5.006790161e-06
26 100 5.960464478e-06
27 100 4.053115845e-06
28 100 4.053115845e-06
29 100 4.053115845e-06
0 1000 5.006790161e-06
1 1000 5.006790161e-06
2 1000 5.006790161e-06
3 1000 5.006790161e-06
4 1000 5.006790161e-06
5 1000 1.001358032e-05
6 1000 4.053115845e-06
7 1000 5.006790161e-06
8 1000 5.006790161e-06
9 1000 5.006790161e-06
10 1000 4.053115845e-06
11 1000 4.053115845e-06
12 1000 3.814697266e-06
13 1000 3.814697266e-06
14 1000 3.814697266e-06
15 1000 3.814697266e-06
16 1000 1.096725464e-05
17 1000 4.053115845e-06
18 1000 5.006790161e-06
19 1000 5.006790161e-06
20 1000 5.006790161e-06
21 1000 2.098083496e-05
22 1000 4.053115845e-06
23 1000 4.053115845e-06
24 1000 5.006790161e-06
25 1000 5.006790161e-06
26 1000 4.053115845e-06
27 1000 5.006790161e-06
28 1000 4.053115845e-06
29 1000 3.814697266e-06
0 10000 0.005040168762
1 10000 2.002716064e-05
2 10000 2.408027649e-05
3 10000 1.192092896e-05
4 10000 1.311302185e-05
5 10000 1.192092896e-05
6 10000 2.598762512e-05
7 10000 3.409385681e-05
8 10000 1.192092896e-05
9 10000 1.71661377e-05
10 10000 1.096725464e-05
11 10000 1.096725464e-05
12 10000 1.621246338e-05
13 10000 1.502037048e-05
14 10000 2.002716064e-05
15 10000 1.59740448e-05
16 10000 1.287460327e-05
17 10000 1.406669617e-05
18 10000 2.789497375e-05
19 10000 2.384185791e-05
20 10000 2.193450928e-05
21 10000 1.382827759e-05
22 10000 1.120567322e-05
23 10000 1.192092896e-05
24 10000 1.192092896e-05
25 10000 1.215934753e-05
26 10000 1.192092896e-05
27 10000 1.192092896e-05
28 10000 1.311302185e-05
29 10000 1.192092896e-05
0 100000 3.099441528e-05
1 100000 3.218650818e-05
2 100000 3.886222839e-05
3 100000 3.290176392e-05
4 100000 4.196166992e-05
5 100000 3.814697266e-05
6 100000 3.600120544e-05
7 100000 3.790855408e-05
8 100000 3.004074097e-05
9 100000 2.908706665e-05
10 100000 3.19480896e-05
11 100000 3.099441528e-05
12 100000 3.004074097e-05
13 100000 3.004074097e-05
14 100000 3.31401825e-05
15 100000 3.31401825e-05
16 100000 3.099441528e-05
17 100000 4.482269287e-05
18 100000 5.483627319e-05
19 100000 4.696846008e-05
20 100000 4.100799561e-05
21 100000 5.507469177e-05
22 100000 4.79221344e-05
23 100000 4.386901855e-05
24 100000 3.790855408e-05
25 100000 5.006790161e-05
26 100000 3.290176392e-05
27 100000 3.218650818e-05
28 100000 4.291534424e-05
29 100000 2.908706665e-05
0 1000000 0.0002470016479
1 1000000 0.000226020813
2 1000000 0.000216960907
3 1000000 0.0002410411835
4 1000000 0.0002200603485
5 1000000 0.0002088546753
6 1000000 0.0002129077911
7 1000000 0.0002110004425
8 1000000 0.0002100467682
9 1000000 0.0002131462097
10 1000000 0.0002138614655
11 1000000 0.0002098083496
12 1000000 0.0002219676971
13 1000000 0.0002288818359
14 1000000 0.0002100467682
15 1000000 0.0002090930939
16 1000000 0.000226020813
17 1000000 0.00022315979
18 1000000 0.0002338886261
19 1000000 0.0002160072327
20 1000000 0.0002100467682
21 1000000 0.000216960907
22 1000000 0.0002131462097
23 1000000 0.0002148151398
24 1000000 0.0002088546753
25 1000000 0.0002272129059
26 1000000 0.000216960907
27 1000000 0.0002288818359
28 1000000 0.0002419948578
29 1000000 0.0002200603485
0 10000000 0.002279996872
1 10000000 0.002637147903
2 10000000 0.002265930176
3 10000000 0.002248048782
4 10000000 0.002254962921
5 10000000 0.002297878265
6 10000000 0.002259016037
7 10000000 0.002253055573
8 10000000 0.00225019455
9 10000000 0.002283811569
10 10000000 0.002277851105
11 10000000 0.002253770828
12 10000000 0.002248048782
13 10000000 0.002241134644
14 10000000 0.002247095108
15 10000000 0.002239942551
16 10000000 0.002242088318
17 10000000 0.002325057983
18 10000000 0.002253055573
19 10000000 0.002260923386
20 10000000 0.002245187759
21 10000000 0.002259016037
22 10000000 0.002242088318
23 10000000 0.002239942551
24 10000000 0.002246141434
25 10000000 0.00226187706
26 10000000 0.002239227295
27 10000000 0.002238988876
28 10000000 0.002240896225
29 10000000 0.00226187706
"""

strdata = """
0 1 0.000014
1 1 0.000004
2 1 0.000002
3 1 0.000002
4 1 0.000002
5 1 0.000002
6 1 0.000002
7 1 0.000035
8 1 0.000001
9 1 0.000001
10 1 0.000001
11 1 0.000001
12 1 0.000001
13 1 0.000001
14 1 0.000001
15 1 0.000001
16 1 0.000001
17 1 0.000001
18 1 0.000001
19 1 0.000001
20 1 0.000001
21 1 0.000001
22 1 0.000001
23 1 0.000001
24 1 0.000001
25 1 0.000001
26 1 0.000001
27 1 0.000001
28 1 0.000001
29 1 0.000001
0 10 0.000001
1 10 0.000001
2 10 0.000001
3 10 0.000001
4 10 0.000001
5 10 0.000001
6 10 0.000001
7 10 0.000001
8 10 0.000001
9 10 0.000001
10 10 0.000001
11 10 0.000001
12 10 0.000001
13 10 0.000001
14 10 0.000001
15 10 0.000001
16 10 0.000001
17 10 0.000001
18 10 0.000001
19 10 0.000001
20 10 0.000001
21 10 0.000001
22 10 0.000001
23 10 0.000001
24 10 0.000001
25 10 0.000001
26 10 0.000001
27 10 0.000001
28 10 0.000001
29 10 0.000001
0 100 0.000001
1 100 0.000001
2 100 0.000001
3 100 0.000001
4 100 0.000001
5 100 0.000001
6 100 0.000001
7 100 0.000001
8 100 0.000001
9 100 0.000001
10 100 0.000001
11 100 0.000001
12 100 0.000001
13 100 0.000001
14 100 0.000001
15 100 0.000001
16 100 0.000001
17 100 0.000001
18 100 0.000001
19 100 0.000001
20 100 0.000001
21 100 0.000001
22 100 0.000001
23 100 0.000001
24 100 0.000001
25 100 0.000001
26 100 0.000001
27 100 0.000001
28 100 0.000001
29 100 0.000001
0 1000 0.000014
1 1000 0.000003
2 1000 0.000003
3 1000 0.000003
4 1000 0.000003
5 1000 0.000003
6 1000 0.000003
7 1000 0.000003
8 1000 0.000003
9 1000 0.000003
10 1000 0.000003
11 1000 0.000003
12 1000 0.000003
13 1000 0.000003
14 1000 0.000003
15 1000 0.000003
16 1000 0.000003
17 1000 0.000003
18 1000 0.000003
19 1000 0.000003
20 1000 0.000003
21 1000 0.000003
22 1000 0.000003
23 1000 0.000003
24 1000 0.000003
25 1000 0.000003
26 1000 0.000003
27 1000 0.000003
28 1000 0.000003
29 1000 0.000003
0 10000 0.000055
1 10000 0.000025
2 10000 0.000018
3 10000 0.000017
4 10000 0.000015
5 10000 0.000019
6 10000 0.000017
7 10000 0.000023
8 10000 0.000015
9 10000 0.000016
10 10000 0.000015
11 10000 0.000016
12 10000 0.000018
13 10000 0.000016
14 10000 0.000015
15 10000 0.000015
16 10000 0.000015
17 10000 0.000015
18 10000 0.000014
19 10000 0.000016
20 10000 0.000015
21 10000 0.000016
22 10000 0.000022
23 10000 0.000017
24 10000 0.000015
25 10000 0.000016
26 10000 0.000015
27 10000 0.000017
28 10000 0.000015
29 10000 0.000017
0 100000 0.000190
1 100000 0.000130
2 100000 0.000110
3 100000 0.000104
4 100000 0.000112
5 100000 0.000101
6 100000 0.000123
7 100000 0.000102
8 100000 0.000093
9 100000 0.000092
10 100000 0.000092
11 100000 0.000093
12 100000 0.000095
13 100000 0.000104
14 100000 0.000092
15 100000 0.000095
16 100000 0.000094
17 100000 0.000097
18 100000 0.000100
19 100000 0.000096
20 100000 0.000318
21 100000 0.000096
22 100000 0.000095
23 100000 0.000099
24 100000 0.000126
25 100000 0.000104
26 100000 0.000097
27 100000 0.000096
28 100000 0.000096
29 100000 0.000293
0 1000000 0.001935
1 1000000 0.001180
2 1000000 0.000955
3 1000000 0.000888
4 1000000 0.000873
5 1000000 0.000887
6 1000000 0.000920
7 1000000 0.000877
8 1000000 0.000960
9 1000000 0.000868
10 1000000 0.000900
11 1000000 0.000942
12 1000000 0.001081
13 1000000 0.000908
14 1000000 0.000908
15 1000000 0.000873
16 1000000 0.000889
17 1000000 0.000868
18 1000000 0.000923
19 1000000 0.000865
20 1000000 0.001161
21 1000000 0.000963
22 1000000 0.000911
23 1000000 0.000869
24 1000000 0.000865
25 1000000 0.000919
26 1000000 0.000868
27 1000000 0.000921
28 1000000 0.000993
29 1000000 0.001018
0 10000000 0.018105
1 10000000 0.006890
2 10000000 0.006388
3 10000000 0.006125
4 10000000 0.006042
5 10000000 0.006024
6 10000000 0.005975
7 10000000 0.005968
8 10000000 0.006068
9 10000000 0.005991
10 10000000 0.005895
11 10000000 0.005952
12 10000000 0.005962
13 10000000 0.005939
14 10000000 0.006510
15 10000000 0.006859
16 10000000 0.006024
17 10000000 0.005978
18 10000000 0.006040
19 10000000 0.006075
20 10000000 0.005974
21 10000000 0.005910
22 10000000 0.005784
23 10000000 0.005755
24 10000000 0.005737
25 10000000 0.005824
26 10000000 0.005664
27 10000000 0.005743
28 10000000 0.005776
29 10000000 0.005919
"""

df = pd.read_csv(StringIO(strdata), sep=" ", names=["try", "len", "rtt"])

df["throughput"] = (2 * df["len"] / df["rtt"]) / 1000000  # MB/s

bw_df = df[["try", "len", "throughput"]].pivot(
    index="try", columns="len", values="throughput"
)
ax = bw_df.plot(kind="box")
ax.set_xlabel("comm size [B]")
ax.set_ylabel("throughput [MB/s]")
plt.savefig("fig1.png")

rtt_df = df[df["len"] <= 100]
rtt_df = rtt_df[["try", "len", "rtt"]]
rtt_df["rtt"] *= 10**6
rtt_df = rtt_df.pivot(index="try", columns="len", values="rtt")

ax = rtt_df.plot(kind="box")
ax.set_ylim(0, 10)
ax.set_xlabel("comm size [B]")
ax.set_ylabel("RTT [micro seconds]")
plt.savefig("fig2.png")
